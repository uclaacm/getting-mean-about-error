<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MSE Lesson</title>
    <link rel="stylesheet" href="css/bulma.css">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <section class="hero is-small is-primary">
      <div class="hero-body">
        <div class="container">
          <div class="columns">
            <div class="column is-8-desktop is-offset-1-desktop">
              <br>
              <h1 class="title is-4 is-spaced">
                A short lesson that will cover:
              </h1>
              <ul class="title is-2">
                <li>Mean Squared Error (MSE)</li>
              </ul>
              <br>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="container">
        <div class="columns">
          <div class="column">
            <div class="content">
              <h2 class="title is-4 has-text-weight-normal">
                On the right, we have a graph with a set of 6 data points.
              </h2>
              <h2 class="title is-4 has-text-weight-normal">
                We want to fit a line that will most closely follow the trend of these points.
                We have two options - the red line, and the green line.
              </h2>
              <h2 class="title is-4 has-text-weight-normal">
                How should we determine which line is a better fit?
              </h2>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div id="error-graph-one">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="container">
        <h2 class="title is-3 center">
          To choose the better fit, we need our good friend <i>Mean Squared Error (MSE)</i>.
        </h2>
        <h2 class="title is-4 center has-text-weight-normal">
          The mean squared error quantifies how closely a line/curve fits to a set of data by
          measuring the average squared difference between our data and the expected values.
        </h2>
        <h2 class="title is-3 center mathformat">
          \[MSE = \frac{1}{n} \sum\limits_{i=1}^n (y-\hat y)^2 \]
        </h2>
      </div>
    </section>
    <section class="section">
      <div class="container">
        <div class="columns">
          <div class="column">
            <div class="content">
              <h2 class="title is-4">
                Let's look at each line separately, starting with the red line.
              </h2>
              <h2 class="title is-4 has-text-weight-normal">
                The equation of the line is:
              </h2>
              <h2 class="title is-4 ">
                \[y = \frac{3}{2}x \]
              </h2>
              <h2 class="title is-4 has-text-weight-normal">
                Notice the two sets of data points on the graph to the right.
                The blue points are our original data values, and the black points are our expected values based on the line equation.
              </h2>
              <h2 class="title is-4 has-text-weight-normal">
                With MSE, we will be dealing with the vertical distances between the two sets of data points.
              </h2>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div id="error-graph-two">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="container">
        <h2 class="title is-3">
          Let's get into the calculations.
        </h2>
        <div class="box steps">
          <div class="step-content">
            <h2 class="title is-4 has-text-weight-normal">
              Referring to the graph, we can organize the data as follows:
            </h2>
            <table class="table center" id="msetable">
            </table>
          </div>
          <div class="step-content">
            <h2 class="title is-4 has-text-weight-normal">
              We can view the two sets of \(y\)-coordinates as two vectors \(\hat y\) and \(y\):
              <span class="title is-6 why-btn"><b>Why?</b></span>
            </h2>
            <h2 class="title is-4 center mathformat">
             \[\hat y\ = \: < 1.5,\: 3, \:4.5, \:6, \:7.5, \:9 > \]
            </h2>
            <h2 class="title is-5 center has-text-weight-normal">
              represents the predicted set of data points based on the model.
            </h2>
            <h2 class="title is-4 center mathformat">
              \[y\ =  \: < 2, \:3, \:6, \:4,\: 8,\: 9 > \]
            </h2>
            <h2 class="title is-5 center has-text-weight-normal" >
              represents the set of the original data points.
            </h2>
          </div>
          <div class="step-content">
            <h2 class="title is-4 has-text-weight-normal">
              Now, we want to generate a vector of all the errors.
              To do so, we take the difference between \(\hat y\) and \(y\):
            </h2>
            <h2 class="title is-4 center mathformat">
              \[\hat y\ - y\]
              \[ = \: < 1.5-2, \:3-3, \:4.5-6, \:6-4, \:7.5-8, \:9-9 > \]
              \[ = \: < -0.5, \: 0, -1.5,\:  2, -0.5, \: 0 > \]
            </h2>
          </div>
          <div class="step-content">
            <h2 class="title is-4 has-text-weight-normal">
              To get the sum of the squared errors, we take the dot product of the difference vector with itself
              (we're almost there!):
            </h2>
            <h2 class="title is-4 center mathformat">
              \[(\hat y  - y) \cdot (\hat y  - y) \]
              \[= (-0.5)^2 + 0^2  + (-1.5)^2 + 2^2 + (-0.5)^2 + 0^2 \]
              \[= 6.75\]
            </h2>
          </div>
          <div class="step-content">
            <h2 class="title is-4 has-text-weight-normal">
              Finally, we want to take the mean of the squared errors (to calculate MEAN SQUARED ERROR.. YOU GET IT?)
              Therefore, we divide the sum of the squared errors by the number of data points -- in our case, 6.
            </h2>
            <h2 class="title is-3 center mathformat">
             \[MSE = 6.75 \div 6 = 1.125\]
            </h2>
          </div>
          <h2 class="title is-4" id="prev" onclick="setStep(-1)">&#10094;</h2>
          <h2 class="title is-4" id="next" onclick="setStep(1)">&#10095;</h2>
        </div>
        <div id="steps-nav">
          <div class="title is-5 dot" onclick="jumpStep(0)">
            <b>1</b>
          </div>
          <div class="title is-5 dot" onclick="jumpStep(1)">
            <b>2</b>
          </div>
          <div class="title is-5 dot" onclick="jumpStep(2)">
            <b>3</b>
          </div>
          <div class="title is-5 dot" onclick="jumpStep(3)">
            <b>4</b>
          </div>
          <div class="title is-5 dot" onclick="jumpStep(4)">
            <b>5</b>
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="container">
        <div class="columns">
          <div class="column">
            <div class="content">
              <h2 class="title is-4">
                Now is your turn to calculate!
              </h2>
              <h2 class="title is-4 has-text-weight-normal">
                Let's try applying the previous steps to the second line of fit,
              </h2>
              <h2 class="title is-4">
                \[y = x + 2\]
              </h2>
              <label class="label">Calculated MSE:</label>
              <div class="field">
              <input class="input is-success" type="text" id="mse-input" value="" />
              </div>
              <button class="button" id="submit">Submit</button>
              <div class="content">
                <div class="notification" id="check-answer" style="display: none">
                </div>
              </div>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div id="error-graph-three">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="container">
        <div class="columns">
          <div class="column">
            <div class="content">
              <h2 class="title is-4 has-text-weight-normal">
                Below, we have a graph with randomly generated data points.
              </h2>
              <br>
              <h2 class="title is-4 has-text-weight-normal">
                We want to fit a line that will most closely follow the trend of these points.
              </h2>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div id="error-graph-four">
              </div>
              <button class="button" id="refresh-data">Refresh Points</button>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer class="footer has-text-centered">
      <div class="content">
        <h5>
          more resources.
        </h5>
      </div>
    </footer>
    <script src="js/d3.min.js"></script>
    <script src="js/function-plot.js?v1.19.1"></script>
    <script src="js/main.js"></script>
  </body>
</html>
